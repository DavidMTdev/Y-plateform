{% extends 'base.html.twig' %}
{% block title %}- profil {% endblock %}

{% block content %} 

<img style="width:20%" src="{{ asset('/avatar/')}}{{member[0].user.avatar }}" alt="">


<h5>Pseudo : {{ member[0].user.pseudo}}</h5>
<h5>Nom : {{ member[0].user.lastname}}</h5>
<h5>Prénom : {{ member[0].user.username}}</h5>
<h5>{{ age }} ans</h5>

{% if member[0].level == true %}
    <h5>level : User </h5>
{% else %}
    <h5>level : Member </h5>
{% endif %}

<a href="#"><button class="modify-password-js" onclick="displayPassword()">Modifier le mot de passe</button></a>
<a href="#"><button onclick="displayForm()">Modifier le profil</button></a>

{% if member[0].level == true %}
    <h1>Mes Jeux</h1>
    {% for g in game %}
        <h5>{{ g.name }}</h5>
        <img style="width:20%;" src="{{ asset('/gameImg/')}}{{g.img }}" alt="">
        <h5>{{ g.nbDownload }}</h5>
        <h5>{{ note[0].note }}</h5>
    {% endfor %}
{% endif %}

<div class="display">

    <h1>Informations</h1>

    <h5>Date de naissance: {{ user.age.date|date("m/d/Y") }}</h5>
    <h5>Adresse mail : {{ user.mail}}</h5>
    <h5>Téléphone : {{ member[0].phone}} </h5>

    <br><br>
    <h1>Localisation</h1>
    <h5>Adresse : {{member[0].address }}</h5>
    <h5>Ville : {{member[0].city }} </h5>
    <h5>Code postal : {{member[0].postal }}</h5>


</div>

<br><br>

<div class="form">
    <h1>Informations</h1><br>
    
    {{form_start(form)}}

    {{form_widget(form)}}

    <button type="submit">Confirmer</button>

    {{form_end(form)}}


    <h1>Localisation</h1>


    {{form_start(formM)}}

    {{form_widget(formM)}}

    <button type="submit">Confirmer</button>
   
    {{form_end(formM)}}


</div>


<div class="popup password">
    <div class="popup-content">
        <h1>Modification</h1>
        <img class="close" src="{{ asset('/img/close.png')}}" alt="">
        <form action="" method="post">
        <input class="modify-password" type="password" placeholder="Ancien mot de passe" name="lastPassword"><br>
        <input class="modify-password" type="password" placeholder="Nouveau mot de passe" name="newPassword"><br>
        <input class="modify-password" type="password" placeholder="Confirmation" name="repeatNewPassword"><br>

        <button type="submit">Confirmer</button>

    </form>
        
    </div>
</div>

<style>

    .display {
        display: block;
    }

    .form, .password {
        display: none;
    }


    .popup{
        background: rgba(0,0,0, 0.6);
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0%;
        display: none;
        justify-content: center;
        align-items: center; 
    }

    .popup-content{
        height: 350px;
        width: 600px;
        background: white;
        padding: 20px;
        border-radius: 2px;
        position: relative;
        box-shadow: 6px 6px 29px -4px rgba(0,0,0, 0.75);
    }

    .modify-password{
        margin: 5px auto;
        display: block;
        width: 50%;
        padding: 8px;
    }

    .close{
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
    }
</style>

<script>
    var displayBlock = document.querySelector(".display");
    var formModify = document.querySelector(".form");
    var password = document.querySelector(".password");

    var li = document.querySelectorAll("li");
    if(li.length >= 6){
        x.style.display = "none";
            y.style.display = "block";
    }

    function displayForm() {
        if (password.classList.contains('display')){
            password.classList.replace('display', 'password');
            formModify.classList.replace('form', 'display');
        }
        else if (displayBlock.classList.contains('display')) {
            displayBlock.classList.replace('display', 'form');
            formModify.classList.replace('form', 'display');
        } else {
            displayBlock.classList.replace('form', 'display');
            formModify.classList.replace('display', 'form');
        } 
    }

    function displayPassword() {
        if (formModify.classList.contains('display')){
            formModify.classList.replace('display', 'form');
            password.classList.replace('password', 'display');
        }
        else if (displayBlock.classList.contains('display')) {
            displayBlock.classList.replace('display', 'password');
            password.classList.replace('password', 'display');
        } else {
            displayBlock.classList.replace('password', 'display');
            password.classList.replace('display', 'password');
        }
    }

    modifyPassword = document.querySelector('.modify-password-js')
    modifyPassword.addEventListener('click', function(){
        document.querySelector('.popup').style.display = 'flex'
        document.querySelector('body').style.overflow = 'hidden'
    })

    document.querySelector('.close').addEventListener('click', function(){
        document.querySelector('.popup').style.display = 'none'
        document.querySelector('body').style.overflow = 'visible'
    })




</script>

{% endblock %}